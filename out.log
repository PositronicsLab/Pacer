INFO
0 LH_HIP_AA
1 RH_HIP_AA
2 LH_HIP_FE
3 RH_HIP_FE
4 LF_HIP_AA
5 RF_HIP_AA
6 LH_LEG_FE
7 RH_LEG_FE
8 LF_HIP_FE
9 RF_HIP_FE
10 LF_LEG_FE
11 RF_LEG_FE
LF_FOOT
10 LF_LEG_FE
8 LF_HIP_FE
4 LF_HIP_AA
RF_FOOT
11 RF_LEG_FE
9 RF_HIP_FE
5 RF_HIP_AA
LH_FOOT
6 LH_LEG_FE
2 LH_HIP_FE
0 LH_HIP_AA
RH_FOOT
7 RH_LEG_FE
3 RH_HIP_FE
1 RH_HIP_AA
4 end effectors:
LF_FOOT
RF_FOOT
LH_FOOT
RH_FOOT
NUM_EEFS: 4
N_FIXED_JOINTS: 5
NUM_JOINTS: 12
NDOFS: 18
NSPATIAL: 6
NEULER: 7
NK: 4
KE = 0, PE = 1.78344
Total Energy = 1.78344
roll_pitch_yaw = [0 -0 0 ]';

iteration: 0  simulation time: 0
iteration: 1  simulation time: 0.001
KE = 6.67997e-05, PE = 1.8345
Total Energy = 1.83457
roll_pitch_yaw = [-1.30861242e-22 -3.3523165e-07 -2.37945613e-20 ]';

[E D] = [ %6x18
-0.70559463 0.70559463 8.92643087 -8.92643087 -0.756107324 0.756107324 -1.22584308 1.22584308 10.9187467 -10.9187467 -4.69929665 4.69929665 0.770465087 3.96369414e-22 -0.0221526791 1.97316918e-20 -1.45347342 -2.44649657e-20 ;
9.53462626 9.53462626 5.03671908 5.03671908 -6.88881449 -6.88881449 -5.48421202 -5.48421202 -1.55275893 -1.55275893 3.50727055 3.50727055 3.96369414e-22 0.825277754 -3.88446201e-23 -0.380998294 7.8616503e-21 -1.0128405 ;
4.42217139 -4.42217139 -15.9929748 15.9929748 -1.79319205 1.79319205 17.5678244 -17.5678244 3.40678038 -3.40678038 -8.70220614 8.70220614 -0.0221526791 -3.88446201e-23 0.900521213 1.87915542e-19 2.27854971 -8.49322056e-21 ;
440.013334 440.013334 -233.002635 -233.002635 -444.236108 -444.236108 298.739791 298.739791 222.143466 222.143466 -336.192054 -336.192054 1.97316918e-20 -0.380998294 1.87915542e-19 374.25346 -1.18909418e-18 0.958929439 ;
51.1804029 -51.1804029 -241.357023 241.357023 49.0842031 -49.0842031 174.096722 -174.096722 -246.450142 246.450142 210.18526 -210.18526 -1.45347342 7.8616503e-21 2.27854971 -1.18909418e-18 99.4042013 -3.94578049e-19 ;
-80.3518576 -80.3518576 -70.5216662 -70.5216662 -100.699733 -100.699733 32.2514194 32.2514194 -75.6386246 -75.6386246 45.5773664 45.5773664 -2.44649657e-20 -1.0128405 -8.49322056e-21 0.958929439 -3.94578049e-19 59.5677893 ];

[F E'] = [ %12x18
2465.78547 681.523305 -304.177792 24.4872571 -468.162515 -496.35208 400.349386 117.071698 245.311141 429.722023 -360.260481 -473.131822 -0.70559463 9.53462626 4.42217139 440.013334 51.1804029 -80.3518576 ;
681.523305 2465.78547 24.4872571 -304.177792 -496.35208 -468.162515 117.071698 400.349386 429.722023 245.311141 -473.131822 -360.260481 0.70559463 9.53462626 -4.42217139 440.013334 -51.1804029 -80.3518576 ;
-304.177792 24.4872571 2760.03163 -512.617733 269.868902 436.252214 -2287.62931 337.983437 479.32987 -600.452456 -181.845641 526.788103 8.92643087 5.03671908 -15.9929748 -233.002635 -241.357023 -70.5216662 ;
24.4872571 -304.177792 -512.617733 2760.03163 436.252214 269.868902 337.983437 -2287.62931 -600.452456 479.32987 526.788103 -181.845641 -8.92643087 5.03671908 15.9929748 -233.002635 241.357023 -70.5216662 ;
-468.162515 -496.35208 269.868902 436.252214 2243.44957 760.449161 -316.025281 -394.541006 -259.839004 45.8558356 427.519051 126.922938 -0.756107324 -6.88881449 -1.79319205 -444.236108 49.0842031 -100.699733 ;
-496.35208 -468.162515 436.252214 269.868902 760.449161 2243.44957 -394.541006 -316.025281 45.8558356 -259.839004 126.922938 427.519051 0.756107324 -6.88881449 1.79319205 -444.236108 -49.0842031 -100.699733 ;
400.349386 117.071698 -2287.62931 337.983437 -316.025281 -394.541006 4634.70987 -242.136835 -123.615392 427.84146 -117.030297 -416.070248 -1.22584308 -5.48421202 17.5678244 298.739791 174.096722 32.2514194 ;
117.071698 400.349386 337.983437 -2287.62931 -394.541006 -316.025281 -242.136835 4634.70987 427.84146 -123.615392 -416.070248 -117.030297 1.22584308 -5.48421202 -17.5678244 298.739791 -174.096722 32.2514194 ;
245.311141 429.722023 479.32987 -600.452456 -259.839004 45.8558356 -123.615392 427.84146 2629.69571 -538.960047 -2342.59555 407.554469 10.9187467 -1.55275893 3.40678038 222.143466 -246.450142 -75.6386246 ;
429.722023 245.311141 -600.452456 479.32987 45.8558356 -259.839004 427.84146 -123.615392 -538.960047 2629.69571 407.554469 -2342.59555 -10.9187467 -1.55275893 -3.40678038 222.143466 246.450142 -75.6386246 ;
-360.260481 -473.131822 -181.845641 526.788103 427.519051 126.922938 -117.030297 -416.070248 -2342.59555 407.554469 4571.45443 -305.147191 -4.69929665 3.50727055 -8.70220614 -336.192054 210.18526 45.5773664 ;
-473.131822 -360.260481 526.788103 -181.845641 126.922938 427.519051 -416.070248 -117.030297 407.554469 -2342.59555 -305.147191 4571.45443 4.69929665 3.50727055 8.70220614 -336.192054 -210.18526 45.5773664 ];

j = [ %= [E,D]*fext*h + vb = [-6.39810704e-05 3.08984828e-18 -0.0200441076 -2.42893995e-17 -0.000335066871 -4.33584755e-19 ]';

k = [ % = [F,E']*fext*h  +  vq = [-0.0454789169 0.0454789169 0.0621836015 -0.0621836015 0.0291460271 -0.0291460271 -0.12914852 0.12914852 -0.044987814 0.044987814 0.124710138 -0.124710138 ]';

workM1 = [ %12x18
2465.78547 681.523305 -304.177792 24.4872571 -468.162515 -496.35208 400.349386 117.071698 245.311141 429.722023 -360.260481 -473.131822 -0.70559463 9.53462626 4.42217139 440.013334 51.1804029 -80.3518576 ;
681.523305 2465.78547 24.4872571 -304.177792 -496.35208 -468.162515 117.071698 400.349386 429.722023 245.311141 -473.131822 -360.260481 0.70559463 9.53462626 -4.42217139 440.013334 -51.1804029 -80.3518576 ;
-304.177792 24.4872571 2760.03163 -512.617733 269.868902 436.252214 -2287.62931 337.983437 479.32987 -600.452456 -181.845641 526.788103 8.92643087 5.03671908 -15.9929748 -233.002635 -241.357023 -70.5216662 ;
24.4872571 -304.177792 -512.617733 2760.03163 436.252214 269.868902 337.983437 -2287.62931 -600.452456 479.32987 526.788103 -181.845641 -8.92643087 5.03671908 15.9929748 -233.002635 241.357023 -70.5216662 ;
-468.162515 -496.35208 269.868902 436.252214 2243.44957 760.449161 -316.025281 -394.541006 -259.839004 45.8558356 427.519051 126.922938 -0.756107324 -6.88881449 -1.79319205 -444.236108 49.0842031 -100.699733 ;
-496.35208 -468.162515 436.252214 269.868902 760.449161 2243.44957 -394.541006 -316.025281 45.8558356 -259.839004 126.922938 427.519051 0.756107324 -6.88881449 1.79319205 -444.236108 -49.0842031 -100.699733 ;
400.349386 117.071698 -2287.62931 337.983437 -316.025281 -394.541006 4634.70987 -242.136835 -123.615392 427.84146 -117.030297 -416.070248 -1.22584308 -5.48421202 17.5678244 298.739791 174.096722 32.2514194 ;
117.071698 400.349386 337.983437 -2287.62931 -394.541006 -316.025281 -242.136835 4634.70987 427.84146 -123.615392 -416.070248 -117.030297 1.22584308 -5.48421202 -17.5678244 298.739791 -174.096722 32.2514194 ;
245.311141 429.722023 479.32987 -600.452456 -259.839004 45.8558356 -123.615392 427.84146 2629.69571 -538.960047 -2342.59555 407.554469 10.9187467 -1.55275893 3.40678038 222.143466 -246.450142 -75.6386246 ;
429.722023 245.311141 -600.452456 479.32987 45.8558356 -259.839004 427.84146 -123.615392 -538.960047 2629.69571 407.554469 -2342.59555 -10.9187467 -1.55275893 -3.40678038 222.143466 246.450142 -75.6386246 ;
-360.260481 -473.131822 -181.845641 526.788103 427.519051 126.922938 -117.030297 -416.070248 -2342.59555 407.554469 4571.45443 -305.147191 -4.69929665 3.50727055 -8.70220614 -336.192054 210.18526 45.5773664 ;
-473.131822 -360.260481 526.788103 -181.845641 126.922938 427.519051 -416.070248 -117.030297 407.554469 -2342.59555 -305.147191 4571.45443 4.69929665 3.50727055 8.70220614 -336.192054 -210.18526 45.5773664 ];

Z = [ % = ( [E,D] - E inv(F) [F,E'] ) R = [ %6x20
-0.0646593926 -0.0646593926 0.0693837035 0.0693837035 0.380914707 0.380914707 0.380378895 0.380378895 -0.380914707 -0.380914707 -0.380378895 -0.380378895 -0.380914707 -0.380914707 -0.380378895 -0.380378895 0.380914707 0.380914707 0.380378895 0.380378895 ;
-0.246608797 0.246608797 -0.248335643 0.248335643 -0.132681937 -0.241405402 -0.228164873 -0.33764966 -0.241405402 -0.132681937 -0.33764966 -0.228164873 0.132681937 0.241405402 0.228164873 0.33764966 0.241405402 0.132681937 0.33764966 0.228164873 ;
0.547217891 0.547217891 0.716294339 0.716294339 -0.0803453852 -0.0803453852 -0.0810212366 -0.0810212366 0.0803453852 0.0803453852 0.0810212366 0.0810212366 0.0803453852 0.0803453852 0.0810212366 0.0810212366 -0.0803453852 -0.0803453852 -0.0810212366 -0.0810212366 ;
14.273509 -14.273509 14.3734573 -14.3734573 -11.7544681 -12.2125546 -12.2666999 -12.7279941 -12.2125546 -11.7544681 -12.7279941 -12.2666999 11.7544681 12.2125546 12.2666999 12.7279941 12.2125546 11.7544681 12.7279941 12.2666999 ;
-3.63530521 -3.63530521 3.90091723 3.90091723 -3.58122435 -3.58122435 -3.61134899 -3.61134899 3.58122435 3.58122435 3.61134899 3.61134899 3.58122435 3.58122435 3.61134899 3.61134899 -3.58122435 -3.58122435 -3.61134899 -3.61134899 ;
-0.323916066 0.323916066 -0.326184246 0.326184246 -4.58473361 0.624552224 0.0773100339 5.32307321 0.624552224 -4.58473361 5.32307321 0.0773100339 4.58473361 -0.624552224 -0.0773100339 -5.32307321 -0.624552224 4.58473361 -5.32307321 -0.0773100339 ];

p = [ % = j + E inv(F) (vq* - k) = [-6.39902619e-05 3.09348509e-18 -0.0200441509 -2.41771261e-17 -0.000335057538 -8.40309623e-19 ]';

H = [ % = Z'A Z = [ %20x20
2.34001908 -0.463801019 1.70856965 -1.11488383 -0.849765222 -0.894757386 -0.897512069 -0.942819285 -1.50421865 -1.45922649 -1.55740724 -1.51210002 0.849765222 0.894757386 0.897512069 0.942819285 1.50421865 1.45922649 1.55740724 1.51210002 ;
-0.463801019 2.34001908 -1.11488383 1.70856965 1.45922649 1.50421865 1.51210002 1.55740724 0.894757386 0.849765222 0.942819285 0.897512069 -1.45922649 -1.50421865 -1.51210002 -1.55740724 -0.894757386 -0.849765222 -0.942819285 -0.897512069 ;
1.70856965 -1.11488383 2.40657503 -0.436649306 -1.48957571 -1.53488293 -1.54298882 -1.58861329 -0.88089163 -0.835584415 -0.929120736 -0.883496263 1.48957571 1.53488293 1.54298882 1.58861329 0.88089163 0.835584415 0.929120736 0.883496263 ;
-1.11488383 1.70856965 -0.436649306 2.40657503 0.835584415 0.88089163 0.883496263 0.929120736 1.53488293 1.48957571 1.58861329 1.54298882 -0.835584415 -0.88089163 -0.883496263 -0.929120736 -1.53488293 -1.48957571 -1.58861329 -1.54298882 ;
-0.849765222 1.45922649 -1.48957571 0.835584415 2.50856409 1.87174144 1.94973833 1.30845641 0.642570276 1.27939292 0.0742348321 0.715516748 -2.50856409 -1.87174144 -1.94973833 -1.30845641 -0.642570276 -1.27939292 -0.0742348321 -0.715516748 ;
-0.894757386 1.50421865 -1.53488293 0.88089163 1.87174144 1.95849218 1.96047675 2.04783494 0.729321009 0.642570276 0.813613358 0.726255164 -1.87174144 -1.95849218 -1.96047675 -2.04783494 -0.729321009 -0.642570276 -0.813613358 -0.726255164 ;
-0.897512069 1.51210002 -1.54298882 0.883496263 1.94973833 1.96047675 1.97053986 1.98135347 0.726255164 0.715516748 0.742038993 0.731225382 -1.94973833 -1.96047675 -1.97053986 -1.98135347 -0.726255164 -0.715516748 -0.742038993 -0.731225382 ;
-0.942819285 1.55740724 -1.58861329 0.929120736 1.30845641 2.04783494 1.98135347 2.7259094 0.813613358 0.0742348321 1.48659492 0.742038993 -1.30845641 -2.04783494 -1.98135347 -2.7259094 -0.813613358 -0.0742348321 -1.48659492 -0.742038993 ;
-1.50421865 0.894757386 -0.88089163 1.53488293 0.642570276 0.729321009 0.726255164 0.813613358 1.95849218 1.87174144 2.04783494 1.96047675 -0.642570276 -0.729321009 -0.726255164 -0.813613358 -1.95849218 -1.87174144 -2.04783494 -1.96047675 ;
-1.45922649 0.849765222 -0.835584415 1.48957571 1.27939292 0.642570276 0.715516748 0.0742348321 1.87174144 2.50856409 1.30845641 1.94973833 -1.27939292 -0.642570276 -0.715516748 -0.0742348321 -1.87174144 -2.50856409 -1.30845641 -1.94973833 ;
-1.55740724 0.942819285 -0.929120736 1.58861329 0.0742348321 0.813613358 0.742038993 1.48659492 2.04783494 1.30845641 2.7259094 1.98135347 -0.0742348321 -0.813613358 -0.742038993 -1.48659492 -2.04783494 -1.30845641 -2.7259094 -1.98135347 ;
-1.51210002 0.897512069 -0.883496263 1.54298882 0.715516748 0.726255164 0.731225382 0.742038993 1.96047675 1.94973833 1.98135347 1.97053986 -0.715516748 -0.726255164 -0.731225382 -0.742038993 -1.96047675 -1.94973833 -1.98135347 -1.97053986 ;
0.849765222 -1.45922649 1.48957571 -0.835584415 -2.50856409 -1.87174144 -1.94973833 -1.30845641 -0.642570276 -1.27939292 -0.0742348321 -0.715516748 2.50856409 1.87174144 1.94973833 1.30845641 0.642570276 1.27939292 0.0742348321 0.715516748 ;
0.894757386 -1.50421865 1.53488293 -0.88089163 -1.87174144 -1.95849218 -1.96047675 -2.04783494 -0.729321009 -0.642570276 -0.813613358 -0.726255164 1.87174144 1.95849218 1.96047675 2.04783494 0.729321009 0.642570276 0.813613358 0.726255164 ;
0.897512069 -1.51210002 1.54298882 -0.883496263 -1.94973833 -1.96047675 -1.97053986 -1.98135347 -0.726255164 -0.715516748 -0.742038993 -0.731225382 1.94973833 1.96047675 1.97053986 1.98135347 0.726255164 0.715516748 0.742038993 0.731225382 ;
0.942819285 -1.55740724 1.58861329 -0.929120736 -1.30845641 -2.04783494 -1.98135347 -2.7259094 -0.813613358 -0.0742348321 -1.48659492 -0.742038993 1.30845641 2.04783494 1.98135347 2.7259094 0.813613358 0.0742348321 1.48659492 0.742038993 ;
1.50421865 -0.894757386 0.88089163 -1.53488293 -0.642570276 -0.729321009 -0.726255164 -0.813613358 -1.95849218 -1.87174144 -2.04783494 -1.96047675 0.642570276 0.729321009 0.726255164 0.813613358 1.95849218 1.87174144 2.04783494 1.96047675 ;
1.45922649 -0.849765222 0.835584415 -1.48957571 -1.27939292 -0.642570276 -0.715516748 -0.0742348321 -1.87174144 -2.50856409 -1.30845641 -1.94973833 1.27939292 0.642570276 0.715516748 0.0742348321 1.87174144 2.50856409 1.30845641 1.94973833 ;
1.55740724 -0.942819285 0.929120736 -1.58861329 -0.0742348321 -0.813613358 -0.742038993 -1.48659492 -2.04783494 -1.30845641 -2.7259094 -1.98135347 0.0742348321 0.813613358 0.742038993 1.48659492 2.04783494 1.30845641 2.7259094 1.98135347 ;
1.51210002 -0.897512069 0.883496263 -1.54298882 -0.715516748 -0.726255164 -0.731225382 -0.742038993 -1.96047675 -1.94973833 -1.98135347 -1.97053986 0.715516748 0.726255164 0.731225382 0.742038993 1.96047675 1.94973833 1.98135347 1.97053986 ];

IP = [ %4x20
2.34001908 -0.463801019 1.70856965 -1.11488383 -0.849765222 -0.894757386 -0.897512069 -0.942819285 -1.50421865 -1.45922649 -1.55740724 -1.51210002 0.849765222 0.894757386 0.897512069 0.942819285 1.50421865 1.45922649 1.55740724 1.51210002 ;
-0.463801019 2.34001908 -1.11488383 1.70856965 1.45922649 1.50421865 1.51210002 1.55740724 0.894757386 0.849765222 0.942819285 0.897512069 -1.45922649 -1.50421865 -1.51210002 -1.55740724 -0.894757386 -0.849765222 -0.942819285 -0.897512069 ;
1.70856965 -1.11488383 2.40657503 -0.436649306 -1.48957571 -1.53488293 -1.54298882 -1.58861329 -0.88089163 -0.835584415 -0.929120736 -0.883496263 1.48957571 1.53488293 1.54298882 1.58861329 0.88089163 0.835584415 0.929120736 0.883496263 ;
-1.11488383 1.70856965 -0.436649306 2.40657503 0.835584415 0.88089163 0.883496263 0.929120736 1.53488293 1.48957571 1.58861329 1.54298882 -0.835584415 -0.88089163 -0.883496263 -0.929120736 -1.53488293 -1.48957571 -1.58861329 -1.54298882 ];

CF = [ %4x20
0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 ;
0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 ;
0 0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 ;
0 0 0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 ];

% >> solve qp positive

%QP variables

qp_Q = [ %20x20
2.34001908 -0.463801019 1.70856965 -1.11488383 -0.849765222 -0.894757386 -0.897512069 -0.942819285 -1.50421865 -1.45922649 -1.55740724 -1.51210002 0.849765222 0.894757386 0.897512069 0.942819285 1.50421865 1.45922649 1.55740724 1.51210002 ;
-0.463801019 2.34001908 -1.11488383 1.70856965 1.45922649 1.50421865 1.51210002 1.55740724 0.894757386 0.849765222 0.942819285 0.897512069 -1.45922649 -1.50421865 -1.51210002 -1.55740724 -0.894757386 -0.849765222 -0.942819285 -0.897512069 ;
1.70856965 -1.11488383 2.40657503 -0.436649306 -1.48957571 -1.53488293 -1.54298882 -1.58861329 -0.88089163 -0.835584415 -0.929120736 -0.883496263 1.48957571 1.53488293 1.54298882 1.58861329 0.88089163 0.835584415 0.929120736 0.883496263 ;
-1.11488383 1.70856965 -0.436649306 2.40657503 0.835584415 0.88089163 0.883496263 0.929120736 1.53488293 1.48957571 1.58861329 1.54298882 -0.835584415 -0.88089163 -0.883496263 -0.929120736 -1.53488293 -1.48957571 -1.58861329 -1.54298882 ;
-0.849765222 1.45922649 -1.48957571 0.835584415 2.50856409 1.87174144 1.94973833 1.30845641 0.642570276 1.27939292 0.0742348321 0.715516748 -2.50856409 -1.87174144 -1.94973833 -1.30845641 -0.642570276 -1.27939292 -0.0742348321 -0.715516748 ;
-0.894757386 1.50421865 -1.53488293 0.88089163 1.87174144 1.95849218 1.96047675 2.04783494 0.729321009 0.642570276 0.813613358 0.726255164 -1.87174144 -1.95849218 -1.96047675 -2.04783494 -0.729321009 -0.642570276 -0.813613358 -0.726255164 ;
-0.897512069 1.51210002 -1.54298882 0.883496263 1.94973833 1.96047675 1.97053986 1.98135347 0.726255164 0.715516748 0.742038993 0.731225382 -1.94973833 -1.96047675 -1.97053986 -1.98135347 -0.726255164 -0.715516748 -0.742038993 -0.731225382 ;
-0.942819285 1.55740724 -1.58861329 0.929120736 1.30845641 2.04783494 1.98135347 2.7259094 0.813613358 0.0742348321 1.48659492 0.742038993 -1.30845641 -2.04783494 -1.98135347 -2.7259094 -0.813613358 -0.0742348321 -1.48659492 -0.742038993 ;
-1.50421865 0.894757386 -0.88089163 1.53488293 0.642570276 0.729321009 0.726255164 0.813613358 1.95849218 1.87174144 2.04783494 1.96047675 -0.642570276 -0.729321009 -0.726255164 -0.813613358 -1.95849218 -1.87174144 -2.04783494 -1.96047675 ;
-1.45922649 0.849765222 -0.835584415 1.48957571 1.27939292 0.642570276 0.715516748 0.0742348321 1.87174144 2.50856409 1.30845641 1.94973833 -1.27939292 -0.642570276 -0.715516748 -0.0742348321 -1.87174144 -2.50856409 -1.30845641 -1.94973833 ;
-1.55740724 0.942819285 -0.929120736 1.58861329 0.0742348321 0.813613358 0.742038993 1.48659492 2.04783494 1.30845641 2.7259094 1.98135347 -0.0742348321 -0.813613358 -0.742038993 -1.48659492 -2.04783494 -1.30845641 -2.7259094 -1.98135347 ;
-1.51210002 0.897512069 -0.883496263 1.54298882 0.715516748 0.726255164 0.731225382 0.742038993 1.96047675 1.94973833 1.98135347 1.97053986 -0.715516748 -0.726255164 -0.731225382 -0.742038993 -1.96047675 -1.94973833 -1.98135347 -1.97053986 ;
0.849765222 -1.45922649 1.48957571 -0.835584415 -2.50856409 -1.87174144 -1.94973833 -1.30845641 -0.642570276 -1.27939292 -0.0742348321 -0.715516748 2.50856409 1.87174144 1.94973833 1.30845641 0.642570276 1.27939292 0.0742348321 0.715516748 ;
0.894757386 -1.50421865 1.53488293 -0.88089163 -1.87174144 -1.95849218 -1.96047675 -2.04783494 -0.729321009 -0.642570276 -0.813613358 -0.726255164 1.87174144 1.95849218 1.96047675 2.04783494 0.729321009 0.642570276 0.813613358 0.726255164 ;
0.897512069 -1.51210002 1.54298882 -0.883496263 -1.94973833 -1.96047675 -1.97053986 -1.98135347 -0.726255164 -0.715516748 -0.742038993 -0.731225382 1.94973833 1.96047675 1.97053986 1.98135347 0.726255164 0.715516748 0.742038993 0.731225382 ;
0.942819285 -1.55740724 1.58861329 -0.929120736 -1.30845641 -2.04783494 -1.98135347 -2.7259094 -0.813613358 -0.0742348321 -1.48659492 -0.742038993 1.30845641 2.04783494 1.98135347 2.7259094 0.813613358 0.0742348321 1.48659492 0.742038993 ;
1.50421865 -0.894757386 0.88089163 -1.53488293 -0.642570276 -0.729321009 -0.726255164 -0.813613358 -1.95849218 -1.87174144 -2.04783494 -1.96047675 0.642570276 0.729321009 0.726255164 0.813613358 1.95849218 1.87174144 2.04783494 1.96047675 ;
1.45922649 -0.849765222 0.835584415 -1.48957571 -1.27939292 -0.642570276 -0.715516748 -0.0742348321 -1.87174144 -2.50856409 -1.30845641 -1.94973833 1.27939292 0.642570276 0.715516748 0.0742348321 1.87174144 2.50856409 1.30845641 1.94973833 ;
1.55740724 -0.942819285 0.929120736 -1.58861329 -0.0742348321 -0.813613358 -0.742038993 -1.48659492 -2.04783494 -1.30845641 -2.7259094 -1.98135347 0.0742348321 0.813613358 0.742038993 1.48659492 2.04783494 1.30845641 2.7259094 1.98135347 ;
1.51210002 -0.897512069 0.883496263 -1.54298882 -0.715516748 -0.726255164 -0.731225382 -0.742038993 -1.96047675 -1.94973833 -1.98135347 -1.97053986 0.715516748 0.726255164 0.731225382 0.742038993 1.96047675 1.94973833 1.98135347 1.97053986 ];

qp_c = [-0.0184358822 -0.0184358822 -0.0183052909 -0.0183052909 -0.00010137245 -0.00010137245 -0.000101894464 -0.000101894464 0.00010137245 0.00010137245 0.000101894464 0.000101894464 0.00010137245 0.00010137245 0.000101894464 0.000101894464 -0.00010137245 -0.00010137245 -0.000101894464 -0.000101894464 ]';

qp_A = [ %8x20
2.34001908 -0.463801019 1.70856965 -1.11488383 -0.849765222 -0.894757386 -0.897512069 -0.942819285 -1.50421865 -1.45922649 -1.55740724 -1.51210002 0.849765222 0.894757386 0.897512069 0.942819285 1.50421865 1.45922649 1.55740724 1.51210002 ;
-0.463801019 2.34001908 -1.11488383 1.70856965 1.45922649 1.50421865 1.51210002 1.55740724 0.894757386 0.849765222 0.942819285 0.897512069 -1.45922649 -1.50421865 -1.51210002 -1.55740724 -0.894757386 -0.849765222 -0.942819285 -0.897512069 ;
1.70856965 -1.11488383 2.40657503 -0.436649306 -1.48957571 -1.53488293 -1.54298882 -1.58861329 -0.88089163 -0.835584415 -0.929120736 -0.883496263 1.48957571 1.53488293 1.54298882 1.58861329 0.88089163 0.835584415 0.929120736 0.883496263 ;
-1.11488383 1.70856965 -0.436649306 2.40657503 0.835584415 0.88089163 0.883496263 0.929120736 1.53488293 1.48957571 1.58861329 1.54298882 -0.835584415 -0.88089163 -0.883496263 -0.929120736 -1.53488293 -1.48957571 -1.58861329 -1.54298882 ;
0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 ;
0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 ;
0 0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 ;
0 0 0 0.1 0 0 0 -1 0 0 0 -1 0 0 0 -1 0 0 0 -1 ];

qp_b = [0.00795457811 0.00795457811 0.00812862443 0.00812862443 0 0 0 0 ]';

%Solutions

xx = [0.000625266369 0.0145384973 0.0139363882 0.000119905359 1.55165372e-17 6.25266369e-05 0 0 0 0 0 0 0 0 0 0 6.25266369e-05 0 0 0 ]';

% << solve qp positive

Z_OP1 = [0.000625266369 0.0145384973 0.0139363882 0.000119905359 1.55165372e-17 6.25266369e-05 0 0 0 0 0 0 0 0 0 0 6.25266369e-05 0 0 0 ]';

feas_OP1 =[ % (A*z-b >= 0) = [0.0104813041 0.0104813041 0.0101766665 0.0101766665 -1.8973538e-19 0.00139132309 0.00139363882 1.19905359e-05 ]';

% >> solve qp

%QP variables

Q = [ %14x14
0.0532176546 -0.00543049395 0.00508830064 -0.0103695954 0.00929455627 0.00232476034 -0.010648162 -0.00331593036 -0.000650200939 0.00172768016 -0.00559249537 -0.00192969559 0.00165880327 0.00160557465 ;
-0.00543049395 0.0376781393 -0.000529615541 0.000527268943 -0.0121283209 0.00640042963 -0.00411097336 0.000341905575 0.0043882886 -0.000383417093 -0.00429454609 -0.00238025734 0.00275466648 0.00226691476 ;
0.00508830064 -0.000529615541 0.0355995604 0.000990807813 0.00975093792 0.00637541827 0.0188454179 0.00522683253 -0.000574684424 -0.00273172125 0.0109331253 0.00411177447 -0.00380214558 -0.00352932193 ;
-0.0103695954 0.000527268943 0.000990807813 0.0445446776 0.0121133222 -0.00320975087 -0.00720972659 0.00647681596 -0.00619055192 -0.000483764403 0.00987808461 0.00475747504 -0.00515355028 -0.00438851918 ;
0.00929455627 -0.0121283209 0.00975093792 0.0121133222 0.0213101959 -0.0162848224 -0.00444634921 0.010132162 0.00405217424 -0.00226773953 0.00316839701 0.000416112785 0.000176341694 -0.000130316002 ;
0.00232476034 0.00640042963 0.00637541827 -0.00320975087 -0.0162848224 0.0293347667 0.00968544544 -0.00835647634 -0.00765413931 0.00162561527 0.00392360206 0.00284465346 -0.00362106744 -0.00284218952 ;
-0.010648162 -0.00411097336 0.0188454179 -0.00720972659 -0.00444634921 0.00968544544 0.0217033588 -0.00406850974 -0.00568558876 -0.000248136826 0.00834104241 0.00410144823 -0.00449050647 -0.00380261285 ;
-0.00331593036 0.000341905575 0.00522683253 0.00647681596 0.010132162 -0.00835647634 -0.00406850974 0.0102266788 0.00752028129 -0.00278077025 0.000557277221 -0.00117815528 0.00209358482 0.00141722604 ;
-0.000650200939 0.0043882886 -0.000574684424 -0.00619055192 0.00405217424 -0.00765413931 -0.00568558876 0.00752028129 0.00974706535 -0.00220739683 -0.00448470467 -0.00343496874 0.00444138173 0.00345984046 ;
0.00172768016 -0.000383417093 -0.00273172125 -0.000483764403 -0.00226773953 0.00162561527 -0.000248136826 -0.00278077025 -0.00220739683 0.000882468419 -0.000410512054 0.000255335933 -0.000532578215 -0.000339024704 ;
-0.00559249537 -0.00429454609 0.0109331253 0.00987808461 0.00316839701 0.00392360206 0.00834104241 0.000557277221 -0.00448470467 -0.000410512054 0.00737998066 0.00352855139 -0.00380774328 -0.00324901107 ;
-0.00192969559 -0.00238025734 0.00411177447 0.00475747504 0.000416112785 0.00284465346 0.00410144823 -0.00117815528 -0.00343496874 0.000255335933 0.00352855139 0.00192434383 -0.00221164148 -0.00182648594 ;
0.00165880327 0.00275466648 -0.00380214558 -0.00515355028 0.000176341694 -0.00362106744 -0.00449050647 0.00209358482 0.00444138173 -0.000532578215 -0.00380774328 -0.00221164148 0.00260921307 0.00212641506 ;
0.00160557465 0.00226691476 -0.00352932193 -0.00438851918 -0.000130316002 -0.00284218952 -0.00380261285 0.00141722604 0.00345984046 -0.000339024704 -0.00324901107 -0.00182648594 0.00212641506 0.00174461763 ];

c = [0.000286564762 -0.00012440864 -4.64427526e-05 -0.000140558659 1.95157488e-05 -6.78243098e-05 -1.72621934e-06 -0.000123610762 -8.42027003e-05 3.9629497e-05 -3.79039887e-05 1.5890136e-06 -1.29339265e-05 -5.9988768e-06 ]';

AA = [ %24x14
-0.101726315 -0.128692687 -0.0536522774 0.0418952468 -0.00921039719 0.282970731 -0.165227863 0.231386156 0.209361619 -0.0661132133 -0.0266193248 -0.0482380862 0.0722661254 0.0525876619 ;
0.0964405954 0.130984159 0.0569146689 -0.0397939023 0.00865493887 -0.281776537 0.168147857 -0.230597484 -0.209527062 0.0656840938 0.0284348283 0.048933738 -0.0729187049 -0.053188536 ;
0.103073879 0.126979812 0.0556301644 -0.0439127012 0.0083971628 -0.278105971 0.165802618 -0.230244494 -0.208146953 0.0656298686 0.0268368224 0.0480945061 -0.0719702773 -0.0523984898 ;
-0.0977881595 -0.129271283 -0.0588925559 0.0418113567 -0.00784170447 0.276911776 -0.168722612 0.229455822 0.208312396 -0.0652007491 -0.0286523259 -0.0487901578 0.0726228567 0.0529993639 ;
-0.148983257 -0.0989291911 0.516054213 -0.0841682998 -0.255274526 -0.376075113 -0.212813268 0.341220432 0.0361849175 -0.0756045294 0.234646817 0.079328365 -0.0669013498 -0.0654821281 ;
-0.313941658 0.211079291 -0.247981022 0.317494877 -0.177010754 0.0662271226 0.0480370265 0.322085488 -0.507551346 0.261703415 -0.313572991 -0.0216035914 -0.0497235342 -0.00963545554 ;
0.392346918 0.250137358 0.042834379 -0.235435318 -0.139057408 0.24036022 -0.0670371653 -0.056873561 0.0566395027 -0.117277708 -0.193579236 -0.374422656 0.0532084247 -0.564372705 ;
0.0810633055 -0.450260088 -0.081194276 -0.0573970629 0.121118391 -0.111575018 0.0060154329 -0.0250341337 -0.182143538 0.180512703 0.283357555 -0.0778510516 0.591106778 -0.0377703873 ;
-0.0862042322 0.124959253 -0.264286768 -0.220375928 0.00443910586 -0.337944493 -0.175784499 0.0473262767 0.433739134 0.426309403 -0.2771357 0.288760298 0.139224907 -0.190706898 ;
0.273953244 -0.211463062 -0.105426478 0.25036363 0.0829788881 0.0597845761 -0.128438449 -0.0640688681 -0.00858099927 0.467408613 0.25526387 -0.385410888 -0.299448338 0.0655691555 ;
0.0279991554 0.369438055 0.0927318893 -0.0306629108 0.41494646 0.129145205 -0.099776979 0.321526227 -0.135378301 -0.0678884975 0.42966145 0.182322219 -0.1835952 -0.162560645 ;
-0.0331386905 -0.123139858 -0.193301513 -0.16492476 -0.458043903 0.130752411 0.670428044 0.161321524 0.101673116 -0.10134474 0.245183516 0.0711514135 -0.0505560756 -0.054912212 ;
0.172704888 -0.0886382219 -0.0619140864 -0.0230664741 -0.626795537 -0.0170873115 -0.466362091 -0.0130078412 -0.234360257 0.0506615403 0.116828395 0.085887845 -0.109775063 -0.0859934246 ;
0.311190643 -0.199457139 0.253267484 -0.32927171 0.158632221 -0.0351902772 0.179542385 0.512498372 -0.250220186 0.185591715 -0.365488381 -0.0879283197 0.0454706992 0.0609847487 ;
-0.392346918 -0.250137358 -0.042834379 0.235435318 0.139057408 -0.24036022 0.0670371653 0.056873561 -0.0203910951 -0.141820534 -0.00161135338 -0.289921881 -0.0338327063 -0.6405031 ;
-0.0810633055 0.450260088 0.081194276 0.0573970629 -0.121118391 0.111575018 -0.0060154329 0.0250341337 -0.0918989256 0.154901159 0.261123485 -0.102586579 0.625827389 -0.0117489005 ;
0.0862042322 -0.124959253 0.264286768 0.220375928 -0.00443910586 0.337944493 0.175784499 -0.0473262767 0.111029895 0.444387803 0.0763970908 0.477621871 -0.0758658304 -0.369169062 ;
-0.273953244 0.211463062 0.105426478 -0.25036363 -0.0829788881 -0.0597845761 0.128438449 0.0640688681 0.259525563 0.392132571 0.186178315 -0.460007843 -0.195291637 0.143820678 ;
-0.0943736064 -0.0770711121 -0.503647074 -0.514385548 0.145517174 0.0584825015 -0.135398693 0.0605935097 -0.220939813 0.0090963877 0.254273364 0.133783805 -0.151318373 -0.125994549 ;
0.464732096 0.150361691 -0.336349041 0.378773281 -0.013778629 -0.354904719 0.0976038612 0.388769059 0.241837304 -0.121131983 0.136124367 0.00542520963 0.0281011344 0.00873233315 ;
-0.0338942626 0.174698144 -0.459505354 0.111424299 0.881149023 0.421459498 0.662652573 -0.305073975 -0.325657527 -0.852365538 -0.153398536 -0.936422188 0.120543949 0.716610278 ;
0.0123950751 0.00147626405 0.000405004909 0.00779744332 0.0192440277 -0.059214499 -0.210764626 -0.857643609 0.485874262 -1.3002679 0.240462669 0.959844016 0.491700939 -0.266057981 ;
0.0766818389 -0.279668962 0.416478201 0.540657188 -0.559623918 -0.215438304 0.251755934 -0.405144186 0.299255011 0.324453338 -0.486060543 0.353047963 0.308340827 1.48819115 ;
-0.441372221 -0.0401489612 0.523761299 -0.209667386 0.471038362 0.251843486 -0.784904167 -0.527145001 -0.0486367168 -0.119457213 -0.928654157 0.0989819915 -1.18721694 0.100999103 ];

bb = [-0.000625266369 -0.0145384973 -0.0139363882 -0.000119905359 -1.55165372e-17 -6.25266369e-05 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -6.25266369e-05 -0 -0 -0 1.8973538e-19 -0.00139132309 -0.00139363882 -1.19905359e-05 ]';

%Solutions

xx = [-0.00310702482 -0.0029222501 -0.00096930383 0.000892298024 -0.000276724095 0.00757501933 -0.00478199502 0.00692320913 0.00588219146 -0.00156469249 5.05322643e-05 -0.00160799455 0.00212735758 0.00142334075 ]';

% << solve qp

feas_OP2 =[ % (A*w - b >= 0) = [0.00758466371 0.00758466371 0.00702536487 0.00702536487 0.000758466371 -3.2187252e-20 3.29837641e-06 -1.28749008e-19 -8.67361738e-19 2.43945489e-19 0.00069923811 4.60785923e-19 3.52365706e-19 1.35525272e-20 4.33680869e-19 0.00069923811 6.50521303e-19 0.000758466371 6.77626358e-19 3.29837641e-06 4.33680869e-19 -4.33680869e-19 0 1.13841228e-18 ]';

z_OP2 =[ % (P*w + z) = [0.00758466371 0.00758466371 0.00702536487 0.00702536487 0.000758466371 -3.2187252e-20 3.29837641e-06 -1.28749008e-19 -8.67361738e-19 2.43945489e-19 0.00069923811 4.60785923e-19 3.52365706e-19 1.35525272e-20 4.33680869e-19 0.00069923811 6.50521303e-19 0.000758466371 6.77626358e-19 3.29837641e-06 ]';

Z*z + p = [-2.15576764e-05 1.19782536e-18 -0.00168787209 -7.155152e-18 -0.00107537278 -1.37287629e-17 ]';

 == v + inv(M)(fext*h + R*z) = [-1.32920002 -0.00969918079 1.28422519 -0.228799772 -0.033788359 -1.07592259 -4.27312749 0.314076237 -0.299840938 1.11922636 0.501964859 -4.63620774 -0.000553366901 -0.00145973345 -0.0273530641 0.0152061671 0.0144790832 0.0754005415 ]';

N'*p = [-0.0200081234 -0.0200081234 -0.0200672273 -0.0200672273 ]';

 == N'*(v + inv(M)*fext*h = [-0.00795471598 -0.00795471598 -0.00812877276 -0.00812877276 ]';

vq* = [-0.0454722368 0.0454722368 0.0621872516 -0.0621872516 0.0291418935 -0.0291418935 -0.129155528 0.129155528 -0.044990688 0.044990688 0.124714835 -0.124714835 ]';

 (fext + [x; 0]) = [0.259875323 -0.259875323 0.101816841 -0.101816841 -0.223894244 0.223894244 0.528714822 -0.528714822 -0.303854783 0.303854783 -0.721250683 0.721250683 -5.33153457e-05 -1.6029107e-19 -15.6018118 4.57817227e-23 0.35003436 -1.01857526e-21 ]';

 inv(M)(fext + [x; 0]) = [497.23035 -497.23035 -755.10802 755.10802 -378.897749 378.897749 2105.89725 -2105.89725 720.213918 -720.213918 -2424.27678 2424.27678 0.473452271 -2.81108598e-13 15.6518477 3.2400716e-12 -14.6086345 1.39763757e-11 ]';

 v + inv(M)(fext + [x; 0])*h = [0.451758113 -0.451758113 -0.692920768 0.692920768 -0.349755856 0.349755856 1.97674172 -1.97674172 0.67522323 -0.67522323 -2.29956194 2.29956194 0.000409492436 -2.78010641e-16 0.00541774699 3.21627704e-15 -0.0149438662 1.39762448e-14 ]';

 ==N'*(v + inv(M)(fext + [x; 0])*h) = [-0.214217797 -0.214217797 -0.170935914 -0.170935914 ]';

%foot	cf = [x y z],	@	pt = [x y z]
LF_FOOT	[0.00053398, -0.00053398, 0.0075847] 	@  [0.070351, 0.098218, -0.00084365]
RF_FOOT	[-0.00049444, 0.00049444, 0.0075847] 	@  [0.070351, -0.098218, -0.00084365]
LH_FOOT	[0.00049444, 0.00049444, 0.0070254] 	@  [-0.10605, 0.098905, -0.0018408]
RH_FOOT	[-0.00053398, -0.00053398, 0.0070254] 	@  [-0.10605, -0.098905, -0.0018408]

STAGE1 = [0.647527123 0.035081373 0.34661953 -0.0975028222 0.0126915758 0.57082401 1.12682418 0.0299335056 -0.0963742828 0.714722035 -0.00549353346 1.43691026 ]';

STAGE2 = [0.237863956 -0.237863956 0.153412379 -0.153412379 -0.200037259 0.200037259 0.507461059 -0.507461059 -0.343415996 0.343415996 -0.692792521 0.692792521 ]';

NC = 4 @ time = 0.001
LF_FOOT(2)	 [6.6078e-05 5.421e-20 0.00046724] 	@  [-0.07741 -0.09834 0.0012413] ,	n =[0, 0, 1]
RF_FOOT(2)	 [6.6078e-05 2.7105e-20 0.00046724] 	@  [-0.07741 0.09834 0.0012413] ,	n =[0, 0, 1]
LH_FOOT(2)	 [-7.417e-05 -1.3553e-20 0.00052446] 	@  [0.11307 -0.09862 0.0010486] ,	n =[0, 0, 1]
RH_FOOT(2)	 [-7.417e-05 3.6825e-19 0.00052446] 	@  [0.11307 0.09862 0.0010486] ,	n =[0, 0, 1]
JOINT	: U	| Q	: des	: err	|Qd	: des	: err
LH_HIP_AA	 0.2379	| -0.3454	 -0.3454	 0	| -0.04547	 0	 -0.04547	|
RH_HIP_AA	 -0.2379	| 0.3454	 0.3454	 0	| 0.04547	 0	 0.04547	|
LH_HIP_FE	 0.1534	| -0.4384	 -0.4384	 0	| 0.06219	 0	 0.06219	|
RH_HIP_FE	 -0.1534	| 0.4384	 0.4384	 0	| -0.06219	 0	 -0.06219	|
LF_HIP_AA	 -0.2	| 0.2984	 0.2984	 0	| 0.02914	 0	 0.02914	|
RF_HIP_AA	 0.2	| -0.2984	 -0.2984	 0	| -0.02914	 0	 -0.02914	|
LH_LEG_FE	 0.5075	| -1.799	 -1.799	 0	| -0.1292	 0	 -0.1292	|
RH_LEG_FE	 -0.5075	| 1.799	 1.799	 0	| 0.1292	 0	 0.1292	|
LF_HIP_FE	 -0.3434	| 0.6553	 0.6553	 0	| -0.04499	 0	 -0.04499	|
RF_HIP_FE	 0.3434	| -0.6553	 -0.6553	 0	| 0.04499	 0	 0.04499	|
LF_LEG_FE	 -0.6928	| 1.76	 1.76	 0	| 0.1247	 0	 0.1247	|
RF_LEG_FE	 0.6928	| -1.76	 -1.76	 0	| -0.1247	 0	 -0.1247	|
ZmP : [-0.01474, 2.931e-18, 0]
roll_pitch_yaw = [-1.30861242e-22 -3.3523165e-07 -2.37945613e-20 ]';


qd_des[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
q_des[-0.3453604, 0.3453604, -0.43837797, 0.43837797, 0.29844582, -0.29844582, -1.7985291, 1.7985291, 0.65525985, -0.65525985, 1.7598842, -1.7598842]
qdd_des = [0 0 0 0 0 0 0 0 0 0 0 0 ]';

qdd = [-1.37586034e-13 1.37586034e-13 5.08153603e-13 -5.08153603e-13 -8.76784794e-14 8.76784794e-14 -3.29764865e-13 3.29764865e-13 2.46918344e-13 -2.46918344e-13 -1.8525457e-13 1.8525457e-13 ]';

uff = [0.237863956 -0.237863956 0.153412379 -0.153412379 -0.200037259 0.200037259 0.507461059 -0.507461059 -0.343415996 0.343415996 -0.692792521 0.692792521 ]';

ufb = [0.00454722368 -0.00454722368 -0.00621872516 0.00621872516 -0.00291418935 0.00291418935 0.0129155528 -0.0129155528 0.0044990688 -0.0044990688 -0.0124714835 0.0124714835 ]';

CoM : [-0.014739846, 2.9314001e-18, 0.11770326]
0.176554 seconds elapsed
